{"posts":[{"title":"Chrome等浏览器图片加载不出来","content":"今天调试前端时，发现部分图片展示不出来，但图片链接没有问题，后发现控制台报错：net::ERR_BLOCKED_BY_CLIENT 如下图所示： 排查发现，是浏览器安装的某个第三方扩展程序已阻止对此网页的访问，例如：uBlock Origin。 换未装插件的浏览器测试，发现可以加载。 解决方案： 将工程页面加入第三方扩展白名单。 ","link":"https://everlasting-elysium.github.io/chrome-deng-liu-lan-qi-xia-chu-xian-neterr_blocked_by_client/"},{"title":"功能未动，测试先行","content":"最近在看了《测试驱动开发》一书，对其中的观点深以为然。 会想起之前在好说工作的日子，由于人员紧缺，但又急需新功能上线，从而刺激用户的增长和提高用户的粘性。那段时间的开发可以称之为昏天黑地，经常一周就是一两个大功能上线，也不会专门去写一些测试，功能跑通就上线，也由此埋下了祸端。 2023年底，由于前期设计不足和需求，导致服务无法支撑较大用户量的同时聊天。架构优化由此开始，但多走一步就是地狱。 没有测试，没有历史需求文档，在这种情况下拆解服务，没走一步都是万丈深渊。过程也可谓曲折： 找历史需求单子 找产品 啃五花八门的代码 找相关的开发同学 测试提交大量bug单 。。。 好在最后，磕磕绊绊的完成了微服务的拆分。后来，就开始留意代码的测试。时间一长，发现其却又存在的意义：一方面完善的测试可以更好的辅助开发，降低开发的心智成本，不用随时担心会不会因为修改什么导致已有功能的损坏。二来，轻装前行，不必每次都需要手动测试相关功能。 目前个人形成的工作流如下： 在开发时间合理的情况下： 完成功能测试，一来可以帮自己梳理业务逻辑，二来可以更好的和产品沟通业务逻辑。 开发代码 完成单元测试。 根据业务持续迭代相关测试。 如果时间紧张： 优先完成功能，并将需要测试的部分又TODO标记 功能完成后，根据时间和测试同时进行测试，并将测试反馈的问题补充到测试中 定期检测代码中的TODO项，进行完善。 善用AI工具 根据经验制作地代码工具帮助自己写测试。 后续有优化回来补充。 这套工作流在我目前的工作中，确实提供了不少便利，也希望这篇文章能对此时的你有所帮助。 ","link":"https://everlasting-elysium.github.io/gong-neng-wei-dong-ce-shi-xian-xing/"},{"title":"关于一次优化","content":"还是炸了，果然一个东西，如果要改到基本看不出原来的样子，最好的方案还是重做，轻装前行。 如果要过要改一个东西，这个东西改完基本看不出原来的样子，如果是你，你怎么选择： 改！ 重做 好吧，我们讨论下来是选择1，因为没时间。既然大家选择了这么走，先试试吧。 💩山是怎么练成的 任务分好了，用户模块。让我看看当时别人怎么写的，看了一天。。。。。，艹，总结出如下问题： 用户表字段太多，平时能用到的，用不到的，全在里面。 索引没改，好多查询都覆盖不到了。 一个SELECT 一个缓存，这么大字段，倒是拆一下啊。。。 好了好了，找到问题就可以下手了，好在单测还是有的，能省点儿事儿。目前看下来， 大部分业务只用在用户这块只用ID，UID，name，descrpition，status这几个字段，为了减少更新所需要的时间，先把他们拆下来，缓存也可以跟着拆一下。 目前30w这个量，加上缓存压力不大，先不考虑分库。 优化SQL 重建索引 另外的发现 SELECT id,name FROM users OFFSET 200000 LIMIT 10,请问这个SQL有问题么？我当时觉得没问题，后来是有的： 这样会导致扫描的行数过多，SQL会很慢。 怎么解决： 目前是自己缓存当前page的最后一个用户ID,用于下一个page的查询，SQL改为: SELECT id,name FROM users WHERE id &gt; N OFFSET 200000 LIMIT 10 🔚 好了好了，搞完了，常回来看看，上述问题，以后注意，自己别犯。 ","link":"https://everlasting-elysium.github.io/guan-yu-yi-ci-you-hua/"}]}